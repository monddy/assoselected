/**
 * assoselected - jQuery plugin
 * @version: 1.2.0 - (2012/11/19)
 * @author Monddy (monddy.na@gmail.com)
 * Copyright (c) 2012 www.drugadmin.com
 * Licensed under the GPL (LICENSE) licens.
 * Requires: jQuery v1.4+  jquery.autocomplete.js
 */
!function(a){a.assoselected=function(b,c,d){var d=a.extend({},{isenter:!0,ischeck:!0,checkWidth:920},d);!function(){b.css("width",d.checkWidth)}(),d.ischeck&&(function(){a("#assowrap").append('<div id="checkarea"><div><input type="checkbox" id="selectall" />全选</div><ul></ul></div>'),a("#checkarea").css("width",d.checkWidth+"px").scroll(function(){a("#selectall").parent("div").css("top",a(this).scrollTop())}),a("#selectall").parent("div").css({width:a("#checkarea").get(0).offsetWidth-19+"px","text-indent":"15px"}),a.each(c,function(b,c){checkItem='<li><input type="checkbox" name="'+c+'" />'+c+"</li>",a("#checkarea").children("ul").append(checkItem)})}(),a("#selectall").click(function(){a(this).attr("checked")?(a("#checkarea").find("ul").find("input").attr("checked",a(this).attr("checked")),b.empty(),a("#checkarea").find("ul").find("input").each(function(){var c=a(this).parent("li").text(),d='<a href="javascript:void(0)">'+c+"</a>";b.append(d)})):(a("#checkarea").find("ul").find("input").attr("checked",!1),b.empty())}),a("#checkarea").find("ul").find("input").each(function(){a(this).click(function(){var c=a(this).parent("li").text(),d='<a href="javascript:void(0)">'+c+"</a>";a(this).attr("checked")?b.append(d):b.find("a").each(function(){c==a(this).text()&&a(this).remove()})})})),b.find("a").live("click",function(){a(this).remove();var b=a(this).text();d.ischeck&&a("#checkarea").find("input[type=checkbox]").each(function(){a(this).parent("li").text()==b&&a(this).attr("checked",!1)})}),d.isenter&&(function(){a("#assowrap").append('<div id="autoComplete"><input type="text" name="textfield" id="enterInp" value="" /><ul></ul><button class="enterAdd" id="enterAdd">添加</button></div>'),a("#autoComplete").css("width",d.checkWidth+"px")}(),a("#enterAdd").click(function(){var f,c=a("#enterInp").val(),e='<a href="javascript:void(0)">'+c+"</a>";if(d.ischeck&&a("#checkarea").find("input[type=checkbox]").each(function(){a(this).parent("li").text()==c&&a(this).attr("checked",!0)}),f=null,""!=b.find("a").text()){if(b.find("a").each(function(){a(this).text()==c&&(f=1)}),1==f)return!1;b.append(e)}else b.append(e)}),a("#autoComplete").autoComplete({source:c,elemCSS:{focus:{color:"#0f0"},blur:{color:"#f00"}}}))}}(jQuery);